import{r as s,j as e,u as v}from"./index-ST99t9e8.js";import{M as y}from"./MoviesList-Dtqm9kY0.js";import{C as M}from"./Container-Bd2n8EjL.js";import{s as b}from"./movies-api-Fd7KCi40.js";const f={search:""},P=({onSubmit:r})=>{const[o,c]=s.useState({...f}),i=({target:t})=>{const{name:l,value:h}=t;c(p=>({...p,[l]:h}))},u=t=>{t.preventDefault(),r({...o}),c({...f})},{search:m}=o;return e.jsxs("form",{onSubmit:u,children:[e.jsx("input",{name:"search",value:m,onChange:i}),e.jsx("button",{type:"submit",children:"Search"})]})},T=()=>{const[r,o]=s.useState([]),[c,i]=s.useState(!1),[u,m]=s.useState(null),[t,l]=s.useState(1),[h,p]=v(),S=h.get("query")??"";s.useEffect(()=>{S&&(async()=>{try{i(!0);const n=await b(S,t);console.log(n),o(j=>[...j,...n.results])}catch(n){m(n)}finally{i(!1)}})()},[t,S]);const x=({search:a})=>{p(a!==""?{query:a}:{}),l(1),o([])},g=()=>{l(a=>a+1)},d=!!r.length;return e.jsxs(M,{children:[e.jsx(P,{onSubmit:x}),d&&e.jsx(y,{items:r}),c&&e.jsx("p",{children:"...loading"}),u&&e.jsx("p",{children:"Oops! Something went wrong. Try again later, please."}),d&&e.jsx("button",{type:"button",onClick:g,children:"Load more"})]})};export{T as default};
